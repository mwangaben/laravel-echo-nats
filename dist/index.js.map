{"version":3,"file":"index.js","sources":["../src/channel.ts","../src/presence-channel.ts","../src/event-formatter.ts","../src/connector.ts","../src/index.ts"],"sourcesContent":["import { Connector, Channel as IChannel } from './types';\n\nexport abstract class BaseChannel implements IChannel {\n    protected listeners: Record<string, Function[]> = {};\n    protected subscribed: boolean = false;\n    protected subscriptionId: string = '';\n\n    constructor(\n        protected connector: Connector,\n        protected name: string,\n        protected options: any = {}\n    ) {\n        this.generateSubscriptionId();\n    }\n\n    protected generateSubscriptionId(): void {\n        this.subscriptionId = 'sub_' + Math.random().toString(36).substr(2, 9);\n    }\n\n    public async subscribe(): Promise<this> {\n        if (this.subscribed) {\n            return this;\n        }\n\n        try {\n            // Use the connector's subscribe method\n            await (this.connector as any).subscribeChannel(this);\n            this.subscribed = true;\n        } catch (error) {\n            console.error(`Failed to subscribe to channel ${this.name}:`, error);\n            throw error;\n        }\n\n        return this;\n    }\n\n    public unsubscribe(): this {\n        if (!this.subscribed) {\n            return this;\n        }\n\n        try {\n            // Use the connector's unsubscribe method\n            (this.connector as any).unsubscribeChannel(this);\n            this.subscribed = false;\n            this.listeners = {};\n        } catch (error) {\n            console.error(`Failed to unsubscribe from channel ${this.name}:`, error);\n        }\n\n        return this;\n    }\n\n    public listen(event: string, callback: Function): this {\n        if (!this.listeners[event]) {\n            this.listeners[event] = [];\n        }\n\n        this.listeners[event].push(callback);\n\n        // Auto-subscribe on first listener\n        if (!this.subscribed && Object.keys(this.listeners).length === 1) {\n            this.subscribe().catch(console.error);\n        }\n\n        return this;\n    }\n\n    public notification(callback: Function): this {\n        return this.listen(\n            'Illuminate\\\\Notifications\\\\Events\\\\BroadcastNotificationCreated',\n            callback\n        );\n    }\n\n    public listenForWhisper(event: string, callback: Function): this {\n        return this.listen('.client-' + event, callback);\n    }\n\n    public stopListening(event?: string, callback?: Function): this {\n        if (!event) {\n            // Remove all listeners\n            this.listeners = {};\n            this.unsubscribe();\n            return this;\n        }\n\n        if (!this.listeners[event]) {\n            return this;\n        }\n\n        if (callback) {\n            const index = this.listeners[event].indexOf(callback);\n            if (index > -1) {\n                this.listeners[event].splice(index, 1);\n            }\n        } else {\n            delete this.listeners[event];\n        }\n\n        // Unsubscribe if no listeners left\n        if (Object.keys(this.listeners).length === 0) {\n            this.unsubscribe();\n        }\n\n        return this;\n    }\n\n    public getName(): string {\n        return this.name;\n    }\n\n    public isSubscribed(): boolean {\n        return this.subscribed;\n    }\n\n    public getListeners(event?: string): Function[] {\n        if (event) {\n            return this.listeners[event] || [];\n        }\n        // Flatten all listeners\n        return Object.values(this.listeners).reduce((acc, val) => acc.concat(val), []);\n    }\n\n    public trigger(event: string, data: any): void {\n        if (this.listeners[event]) {\n            this.listeners[event].forEach(callback => {\n                try {\n                    callback(data);\n                } catch (error) {\n                    console.error(`Error in channel ${this.name} event handler for \"${event}\":`, error);\n                }\n            });\n        }\n\n        // Also trigger wildcard listeners\n        if (this.listeners['*']) {\n            this.listeners['*'].forEach(callback => {\n                try {\n                    callback(event, data);\n                } catch (error) {\n                    console.error(`Error in channel ${this.name} wildcard handler for \"${event}\":`, error);\n                }\n            });\n        }\n    }\n}\n\nexport class Channel extends BaseChannel {\n    // Base channel implementation is complete\n}\n\nexport class PrivateChannel extends BaseChannel {\n    constructor(connector: Connector, name: string, options: any = {}) {\n        super(connector, 'private-' + name, options);\n    }\n\n    public async subscribe(): Promise<this> {\n        // For private channels, authenticate first\n        try {\n            await (this.connector as any).authenticatePrivateChannel(this.name);\n            return await super.subscribe();\n        } catch (error) {\n            console.error(`Authentication failed for private channel ${this.name}:`, error);\n            throw error;\n        }\n    }\n\n    public whisper(eventName: string, data: any): this {\n        // Send whisper through connector\n        const whisperSubject = `${this.name}.whisper.${eventName}`;\n        (this.connector as any).send(whisperSubject, data);\n        return this;\n    }\n}\n\nexport class EncryptedPrivateChannel extends PrivateChannel {\n    constructor(connector: Connector, name: string, options: any = {}) {\n        super(connector, 'private-encrypted-' + name, options);\n    }\n}","import { PrivateChannel } from './channel';\nimport { Connector, PresenceChannel as IPresenceChannel } from './types';\n\nexport class PresenceChannel extends PrivateChannel implements IPresenceChannel {\n    private members: Map<string | number, any> = new Map();\n    private hereCallbacks: Function[] = [];\n    private joiningCallbacks: Function[] = [];\n    private leavingCallbacks: Function[] = [];\n\n    constructor(connector: Connector, name: string, options: any = {}) {\n        super(connector, 'presence-' + name, options);\n    }\n\n    public async subscribe(): Promise<this> {\n        if (this.subscribed) {\n            return this;\n        }\n\n        await super.subscribe();\n\n        // Set up presence event listeners\n        this.listen('presence:here', (users: any[]) => {\n            this.updateMembers(users);\n            this.triggerHere(users);\n        });\n\n        this.listen('presence:joining', (user: any) => {\n            this.addMember(user);\n            this.triggerJoining(user);\n        });\n\n        this.listen('presence:leaving', (user: any) => {\n            this.removeMember(user);\n            this.triggerLeaving(user);\n        });\n\n        return this;\n    }\n\n    public unsubscribe(): this {\n        this.subscribed = false;\n        return this;\n    }\n\n    public here(callback: (users: any[]) => void): this {\n        this.hereCallbacks.push(callback);\n\n        // Trigger immediately if we already have members\n        if (this.members.size > 0) {\n            callback(this.getMembers());\n        }\n\n        return this;\n    }\n\n    public joining(callback: (user: any) => void): this {\n        this.joiningCallbacks.push(callback);\n        return this;\n    }\n\n    public leaving(callback: (user: any) => void): this {\n        this.leavingCallbacks.push(callback);\n        return this;\n    }\n\n    public whisper(eventName: string, data: any): this {\n        // Override parent whisper to include presence channel specific logic\n        return super.whisper(eventName, data);\n    }\n\n    public getMembers(): any[] {\n        return Array.from(this.members.values());\n    }\n\n    public getMember(userId: string | number): any | undefined {\n        return this.members.get(userId);\n    }\n\n    private updateMembers(users: any[]): void {\n        this.members.clear();\n        users.forEach(user => {\n            if (user.id || user.user_id) {\n                const userId = user.id || user.user_id;\n                this.members.set(userId, user);\n            }\n        });\n    }\n\n    private addMember(user: any): void {\n        const userId = user.id || user.user_id;\n        if (userId) {\n            this.members.set(userId, user);\n        }\n    }\n\n    private removeMember(user: any): void {\n        const userId = user.id || user.user_id;\n        if (userId) {\n            this.members.delete(userId);\n        }\n    }\n\n    private triggerHere(users: any[]): void {\n        this.hereCallbacks.forEach(callback => {\n            try {\n                callback(users);\n            } catch (error) {\n                console.error('Error in here callback:', error);\n            }\n        });\n    }\n\n    private triggerJoining(user: any): void {\n        this.joiningCallbacks.forEach(callback => {\n            try {\n                callback(user);\n            } catch (error) {\n                console.error('Error in joining callback:', error);\n            }\n        });\n    }\n\n    private triggerLeaving(user: any): void {\n        this.leavingCallbacks.forEach(callback => {\n            try {\n                callback(user);\n            } catch (error) {\n                console.error('Error in leaving callback:', error);\n            }\n        });\n    }\n\n    // Handle presence-specific events from the connector\n    public handlePresenceEvent(event: string, data: any): void {\n        switch (event) {\n            case 'presence:here':\n                this.updateMembers(data);\n                this.triggerHere(data);\n                break;\n            case 'presence:joining':\n                this.addMember(data);\n                this.triggerJoining(data);\n                break;\n            case 'presence:leaving':\n                this.removeMember(data);\n                this.triggerLeaving(data);\n                break;\n        }\n    }\n}","import { EventFormatter } from './types';\n\nexport class NatsEventFormatter implements EventFormatter {\n    private namespace: string = 'App\\\\Events';\n\n    constructor(namespace?: string) {\n        if (namespace) {\n            this.namespace = namespace;\n        }\n    }\n\n    format(namespace: string, event: string): string {\n        // If event is already namespaced, return as is\n        if (event.startsWith(namespace)) {\n            return event;\n        }\n\n        // Format: Namespace\\EventName\n        return namespace + '\\\\' + event;\n    }\n\n    setNamespace(namespace: string): void {\n        this.namespace = namespace;\n    }\n\n    getNamespace(): string {\n        return this.namespace;\n    }\n\n    // Helper to check if event belongs to namespace\n    belongsToNamespace(eventName: string): boolean {\n        return eventName.startsWith(this.namespace);\n    }\n\n    // Extract event name without namespace\n    getEventNameWithoutNamespace(eventName: string): string {\n        if (this.belongsToNamespace(eventName)) {\n            // Remove namespace and leading backslash\n            return eventName.substring(this.namespace.length + 1);\n        }\n        return eventName;\n    }\n}","import axios, { AxiosInstance, AxiosRequestHeaders } from 'axios';\nimport {\n    NatsEchoOptions,\n    BroadcastEvent,\n    AuthResponse,\n    Subscription\n} from './types';\nimport { Channel, PrivateChannel, EncryptedPrivateChannel } from './channel';\nimport { PresenceChannel } from './presence-channel';\nimport { NatsEventFormatter } from './event-formatter';\n\n// NATS Protocol Constants\nconst NATS_PROTOCOL = {\n    INFO: 'INFO',\n    CONNECT: 'CONNECT',\n    PUB: 'PUB',\n    SUB: 'SUB',\n    UNSUB: 'UNSUB',\n    MSG: 'MSG',\n    PING: 'PING',\n    PONG: 'PONG',\n    OK: '+OK',\n    ERR: '-ERR'\n} as const;\n\n// Laravel Echo connector interface\ninterface LaravelEchoConnector {\n    connect(): Promise<void>;\n    disconnect(): void;\n    listen(channel: string, event: string, callback: Function): any;\n    channel(name: string): any;\n    privateChannel(name: string): any;\n    join(name: string): any;\n    leave(name: string): void;\n    socketId(): string;\n    on(event: string, handler: Function): void;\n    off(event: string, handler?: Function): void;\n}\n\nexport class NatsConnector implements LaravelEchoConnector {\n    private ws: WebSocket | null = null;\n    private eventFormatter: NatsEventFormatter;\n    private channels: Map<string, Channel> = new Map();\n    private subscriptions: Map<string, Subscription> = new Map();\n    private eventHandlers: Map<string, Set<Function>> = new Map();\n    private reconnectTimer: any = null;\n    private reconnectAttempts: number = 0;\n    private socketIdentifier: string = '';\n    private axios: AxiosInstance;\n    private isConnecting: boolean = false;\n    private connectionPromise: Promise<void> | null = null;\n    private pingInterval: any = null;\n    private serverInfo: any = null;\n    private connected: boolean = false;\n    private partialMessage: string = '';\n    private pendingData: string = '';\n    private bytesExpected: number = 0;\n\n    // Laravel Echo compatibility properties\n    public connector: any = this;\n    public options: NatsEchoOptions;\n\n    constructor(options: NatsEchoOptions = {}) {\n        this.options = this.normalizeOptions(options);\n        this.eventFormatter = new NatsEventFormatter(this.options.namespace);\n        this.axios = axios.create();\n        this.setupAxiosInterceptors();\n        this.generateSocketId();\n    }\n\n    private normalizeOptions(options: NatsEchoOptions): NatsEchoOptions {\n        const normalized: NatsEchoOptions = {\n            host: options.host || window.location.hostname,\n            port: options.port || 4222,\n            wsPort: options.wsPort || 4223,\n            wsPath: options.wsPath || '/',\n            useTLS: options.useTLS || window.location.protocol === 'https:',\n            forceTLS: options.forceTLS || false,\n            authEndpoint: options.authEndpoint || '/broadcasting/auth',\n            namespace: options.namespace || 'App\\\\Events',\n            broadcaster: 'nats',\n            maxReconnectAttempts: options.maxReconnectAttempts || 10,\n            reconnectDelay: options.reconnectDelay || 3000,\n            timeout: options.timeout || 10000, // 10 seconds for NATS handshake\n            debug: options.debug || false,\n            pingInterval: options.pingInterval || 30000, // 30 seconds\n            ...options\n        };\n\n        // Ensure auth headers\n        if (!normalized.auth) {\n            normalized.auth = {};\n        }\n        if (!normalized.auth.headers) {\n            normalized.auth.headers = {};\n        }\n\n        // Add CSRF token from meta tag if not provided\n        if (!normalized.auth.headers['X-CSRF-TOKEN']) {\n            const csrfMeta = document.querySelector('meta[name=\"csrf-token\"]');\n            if (csrfMeta) {\n                normalized.auth.headers['X-CSRF-TOKEN'] = csrfMeta.getAttribute('content') || '';\n            }\n        }\n\n        // Add CSRF token from options\n        if (options.csrfToken && !normalized.auth.headers['X-CSRF-TOKEN']) {\n            normalized.auth.headers['X-CSRF-TOKEN'] = options.csrfToken;\n        }\n\n        return normalized;\n    }\n\n    private setupAxiosInterceptors(): void {\n        this.axios.interceptors.request.use((config) => {\n            if (this.options.auth?.headers) {\n                const headers: AxiosRequestHeaders = config.headers || {};\n                Object.entries(this.options.auth.headers).forEach(([key, value]) => {\n                    headers[key] = value;\n                });\n                config.headers = headers;\n            }\n            if (this.options.auth?.params && config.params) {\n                config.params = {\n                    ...config.params,\n                    ...this.options.auth.params\n                };\n            }\n            return config;\n        });\n    }\n\n    private generateSocketId(): void {\n        this.socketIdentifier = 'nats_' + Math.random().toString(36).substr(2, 9);\n    }\n\n    private buildWebSocketUrl(): string {\n        const protocol = this.options.useTLS ? 'wss' : 'ws';\n        const port = this.options.wsPort || 4223;\n        const path = this.options.wsPath || '/';\n\n        // Build URL WITHOUT auth parameters in query string\n        // NATS text protocol expects auth in CONNECT command, not URL\n        let url = `${protocol}://${this.options.host}:${port}${path}`;\n\n        if (this.options.debug) {\n            console.log('NATS WebSocket URL:', url);\n        }\n\n        return url;\n    }\n\n    public async connect(): Promise<void> {\n        if (this.isConnecting && this.connectionPromise) {\n            return this.connectionPromise;\n        }\n\n        if (this.connected && this.ws?.readyState === WebSocket.OPEN) {\n            return Promise.resolve();\n        }\n\n        this.isConnecting = true;\n        this.connectionPromise = new Promise((resolve, reject) => {\n            try {\n                const url = this.buildWebSocketUrl();\n\n                if (this.options.debug) {\n                    console.log('Connecting to NATS WebSocket:', url);\n                }\n\n                this.ws = new WebSocket(url);\n\n                // Set binary type to arraybuffer for better performance\n                this.ws.binaryType = 'arraybuffer';\n\n                this.ws.onopen = () => {\n                    if (this.options.debug) {\n                        console.log('NATS WebSocket: Connection opened');\n                    }\n                    // NATS protocol handshake starts with server sending INFO\n                    // We'll handle it in onmessage\n                };\n\n                this.ws.onmessage = (event) => {\n                    this.handleNatsMessage(event.data);\n                };\n\n                this.ws.onerror = (error) => {\n                    if (this.options.debug) {\n                        console.error('NATS WebSocket: Connection error', error);\n                    }\n                    this.isConnecting = false;\n                    this.connected = false;\n                    this.trigger('error', error);\n                    reject(error);\n                };\n\n                this.ws.onclose = (event) => {\n                    if (this.options.debug) {\n                        console.log(`NATS WebSocket: Connection closed`, event.code, event.reason);\n                    }\n\n                    this.isConnecting = false;\n                    this.connected = false;\n                    this.cleanupConnection();\n\n                    this.trigger('disconnect', event);\n\n                    if (!event.wasClean && this.reconnectAttempts < this.options.maxReconnectAttempts!) {\n                        this.scheduleReconnect();\n                    }\n\n                    reject(new Error(`Connection closed: ${event.reason || 'Unknown reason'}`));\n                };\n\n                // Connection timeout\n                setTimeout(() => {\n                    if (this.isConnecting) {\n                        this.isConnecting = false;\n                        this.ws?.close();\n                        reject(new Error('NATS connection timeout (10s)'));\n                    }\n                }, this.options.timeout);\n\n            } catch (error) {\n                this.isConnecting = false;\n                this.connected = false;\n                reject(error);\n            }\n        });\n\n        return this.connectionPromise;\n    }\n\n    private handleNatsMessage(data: string | ArrayBuffer): void {\n        try {\n            let messageStr: string;\n\n            if (data instanceof ArrayBuffer) {\n                // Convert ArrayBuffer to string\n                const decoder = new TextDecoder();\n                messageStr = decoder.decode(data);\n            } else {\n                messageStr = data;\n            }\n\n            if (this.options.debug) {\n                console.log('NATS raw message:', messageStr);\n            }\n\n            // Combine with any pending partial message\n            const fullMessage = this.partialMessage + messageStr;\n            this.partialMessage = '';\n\n            // Handle the message\n            this.processNatsMessage(fullMessage);\n\n        } catch (error) {\n            console.error('Failed to handle NATS message:', error, data);\n        }\n    }\n\n    private processNatsMessage(messageStr: string): void {\n        // Check if we're waiting for data from a MSG command\n        if (this.bytesExpected > 0 && this.pendingData.length < this.bytesExpected) {\n            this.pendingData += messageStr;\n\n            if (this.pendingData.length >= this.bytesExpected) {\n                // We have all the data\n                const data = this.pendingData.substring(0, this.bytesExpected);\n                const remaining = this.pendingData.substring(this.bytesExpected);\n                this.bytesExpected = 0;\n                this.pendingData = '';\n\n                this.handleCompleteMessage(data);\n\n                // Process any remaining data\n                if (remaining.trim()) {\n                    this.processNatsMessage(remaining);\n                }\n            }\n            return;\n        }\n\n        // Split by newlines but preserve empty lines for MSG protocol\n        const lines = messageStr.split('\\n');\n\n        for (let i = 0; i < lines.length; i++) {\n            let line = lines[i];\n\n            // Handle Windows line endings\n            line = line.replace('\\r', '');\n\n            if (line.trim() === '') {\n                continue; // Skip empty lines\n            }\n\n            if (line.startsWith(NATS_PROTOCOL.INFO + ' ')) {\n                this.handleTextInfoMessage(line);\n            } else if (line.startsWith(NATS_PROTOCOL.OK)) {\n                this.handleOkMessage();\n            } else if (line.startsWith(NATS_PROTOCOL.ERR + ' ')) {\n                this.handleTextErrorMessage(line);\n            } else if (line.startsWith(NATS_PROTOCOL.PING)) {\n                this.handlePing();\n            } else if (line.startsWith(NATS_PROTOCOL.PONG)) {\n                // Ignore PONG responses\n                if (this.options.debug) {\n                    console.log('NATS: Received PONG');\n                }\n            } else if (line.startsWith(NATS_PROTOCOL.MSG + ' ')) {\n                // Handle MSG protocol: MSG <subject> <sid> [reply-to] <#bytes>\\r\\n<data>\n                this.handleMsgHeader(line, lines.slice(i + 1).join('\\n'));\n                break; // Rest will be handled by msg handler\n            } else {\n                if (this.options.debug) {\n                    console.log('Unhandled NATS line:', line);\n                }\n            }\n        }\n    }\n\n    private handleMsgHeader(headerLine: string, remainingData: string): void {\n        // Parse: MSG <subject> <sid> [reply-to] <#bytes>\n        const parts = headerLine.split(' ');\n        if (parts.length < 4) {\n            console.error('Invalid MSG header:', headerLine);\n            return;\n        }\n\n        const subject = parts[1];\n        const sid = parts[2];\n\n        // Find the byte count (last part before optional reply-to)\n        let byteCountStr = parts[parts.length - 1];\n        this.bytesExpected = parseInt(byteCountStr, 10);\n\n        if (isNaN(this.bytesExpected)) {\n            console.error('Invalid byte count in MSG:', byteCountStr);\n            this.bytesExpected = 0;\n            return;\n        }\n\n        if (this.options.debug) {\n            console.log(`NATS MSG: subject=${subject}, sid=${sid}, bytes=${this.bytesExpected}`);\n        }\n\n        // Start collecting data\n        this.pendingData = remainingData;\n\n        // If we already have all the data, process it immediately\n        if (this.pendingData.length >= this.bytesExpected) {\n            const data = this.pendingData.substring(0, this.bytesExpected);\n            const extra = this.pendingData.substring(this.bytesExpected);\n            this.bytesExpected = 0;\n            this.pendingData = '';\n\n            this.handleCompleteMessage(data);\n\n            // Process any extra data\n            if (extra.trim()) {\n                this.processNatsMessage(extra);\n            }\n        }\n    }\n\n    private handleCompleteMessage(data: string): void {\n        try {\n            // Parse the message data\n            let parsedData;\n            try {\n                parsedData = JSON.parse(data);\n            } catch {\n                parsedData = data;\n            }\n\n            // Convert to Laravel broadcast format\n            const laravelEvent: BroadcastEvent = {\n                event: parsedData.event || 'NatsMessage',\n                data: parsedData.data || parsedData,\n                channel: 'unknown', // We'll set this from subscription mapping\n                socket: this.socketIdentifier,\n                timestamp: new Date().toISOString()\n            };\n\n            // Try to find the channel by SID (we need to track this better)\n            // For now, we'll rely on the subject from the subscription\n            this.handleBroadcastEvent(laravelEvent);\n\n        } catch (error) {\n            console.error('Error handling complete message:', error, data);\n        }\n    }\n\n    private handleTextInfoMessage(infoLine: string): void {\n        try {\n            // Extract JSON from \"INFO {json}\"\n            const jsonStr = infoLine.substring(NATS_PROTOCOL.INFO.length + 1);\n            const info = JSON.parse(jsonStr);\n\n            if (this.options.debug) {\n                console.log('NATS Server Info:', info);\n            }\n\n            this.serverInfo = info;\n\n            // Send CONNECT response with authentication\n            const connectMsg: any = {\n                lang: 'javascript',\n                version: '2.0.0',\n                protocol: 0, // 0 = text protocol\n                verbose: this.options.debug || false,\n                pedantic: false,\n                headers: info.headers || false,\n                echo: true,\n                tls_required: false,\n                name: `laravel-echo-nats-${this.socketIdentifier}`\n            };\n\n            // Add authentication if required\n            if (info.auth_required) {\n                if (this.options.user) {\n                    connectMsg.user = this.options.user;\n                }\n                if (this.options.pass) {\n                    connectMsg.pass = this.options.pass;\n                }\n                if (this.options.token) {\n                    connectMsg.auth_token = this.options.token;\n                }\n            }\n\n            // Remove undefined values\n            Object.keys(connectMsg).forEach(key => {\n                if (connectMsg[key] === undefined) {\n                    delete connectMsg[key];\n                }\n            });\n\n            // Send CONNECT command\n            const connectCommand = `${NATS_PROTOCOL.CONNECT} ${JSON.stringify(connectMsg)}\\r\\n`;\n            this.sendRawToNats(connectCommand);\n\n            if (this.options.debug) {\n                console.log('Sent CONNECT:', connectCommand);\n            }\n\n        } catch (error) {\n            console.error('Failed to handle INFO message:', error, infoLine);\n        }\n    }\n\n    private handleTextErrorMessage(errLine: string): void {\n        // Extract error message from \"-ERR 'message'\"\n        let errorMessage = 'Unknown error';\n\n        if (errLine.startsWith(\"-ERR '\") && errLine.endsWith(\"'\")) {\n            errorMessage = errLine.substring(6, errLine.length - 1);\n        } else if (errLine.startsWith('-ERR ')) {\n            errorMessage = errLine.substring(5);\n        }\n\n        const error = new Error(`NATS server error: ${errorMessage}`);\n\n        console.error('NATS error:', errorMessage);\n\n        this.trigger('error', error);\n\n        if (this.isConnecting) {\n            this.isConnecting = false;\n            this.connected = false;\n            this.ws?.close();\n\n            // Reject the connection promise\n            if (this.connectionPromise) {\n                const promise = this.connectionPromise as any;\n                promise._reject?.(error);\n            }\n        }\n    }\n\n    private handlePing(): void {\n        if (this.options.debug) {\n            console.log('NATS: Received PING');\n        }\n\n        // Respond with PONG\n        this.sendRawToNats(`${NATS_PROTOCOL.PONG}\\r\\n`);\n    }\n\n    private handleOkMessage(): void {\n        if (this.options.debug) {\n            console.log('NATS: Server accepted connection');\n        }\n\n        this.isConnecting = false;\n        this.connected = true;\n        this.reconnectAttempts = 0;\n\n        // Start ping interval\n        this.startPingInterval();\n\n        // Resubscribe to all channels\n        this.resubscribeAll();\n\n        // Trigger events\n        this.trigger('connect');\n        this.trigger('connected');\n\n        // Resolve connection promise\n        if (this.connectionPromise) {\n            const promise = this.connectionPromise as any;\n            promise._resolve?.();\n        }\n    }\n\n    private startPingInterval(): void {\n        if (this.pingInterval) {\n            clearInterval(this.pingInterval);\n        }\n\n        const interval = this.options.pingInterval || 30000;\n        this.pingInterval = setInterval(() => {\n            if (this.ws?.readyState === WebSocket.OPEN && this.connected) {\n                if (this.options.debug) {\n                    console.log('NATS: Sending PING');\n                }\n                this.sendRawToNats(`${NATS_PROTOCOL.PING}\\r\\n`);\n            }\n        }, interval);\n    }\n\n    private cleanupConnection(): void {\n        if (this.pingInterval) {\n            clearInterval(this.pingInterval);\n            this.pingInterval = null;\n        }\n\n        this.serverInfo = null;\n        this.partialMessage = '';\n        this.pendingData = '';\n        this.bytesExpected = 0;\n    }\n\n    private sendRawToNats(command: string): void {\n        if (this.ws && this.ws.readyState === WebSocket.OPEN) {\n            if (this.options.debug) {\n                console.log('NATS: Sending:', command);\n            }\n            this.ws.send(command);\n        } else {\n            console.error('NATS Echo: Cannot send, connection not open');\n        }\n    }\n\n    private sendToNats(data: any): void {\n        if (this.ws && this.ws.readyState === WebSocket.OPEN) {\n            let command = '';\n\n            if (data.op === 'pub') {\n                // PUB <subject> <#bytes>\\r\\n<data>\n                const subject = data.subject;\n                const payload = typeof data.data === 'string' ? data.data : JSON.stringify(data.data);\n                const size = new TextEncoder().encode(payload).length;\n                command = `${NATS_PROTOCOL.PUB} ${subject} ${size}\\r\\n${payload}\\r\\n`;\n            } else if (data.op === 'sub') {\n                // SUB <subject> <sid>\n                const subject = data.subject;\n                const sid = data.sid;\n                const queue = data.queue || '';\n                if (queue) {\n                    command = `${NATS_PROTOCOL.SUB} ${subject} ${queue} ${sid}\\r\\n`;\n                } else {\n                    command = `${NATS_PROTOCOL.SUB} ${subject} ${sid}\\r\\n`;\n                }\n            } else if (data.op === 'unsub') {\n                // UNSUB <sid> [max-msgs]\n                const sid = data.sid;\n                const max = data.max || '';\n                command = `${NATS_PROTOCOL.UNSUB} ${sid} ${max}\\r\\n`.trim() + '\\r\\n';\n            } else if (data.op === 'ping') {\n                command = `${NATS_PROTOCOL.PING}\\r\\n`;\n            } else if (data.op === 'pong') {\n                command = `${NATS_PROTOCOL.PONG}\\r\\n`;\n            }\n\n            if (command && this.options.debug) {\n                console.log('NATS: Sending command:', command);\n            }\n\n            if (command) {\n                this.ws.send(command);\n            }\n        } else {\n            console.error('NATS Echo: Cannot send, connection not open');\n        }\n    }\n\n    private scheduleReconnect(): void {\n        if (this.reconnectTimer) {\n            clearTimeout(this.reconnectTimer);\n        }\n\n        this.reconnectAttempts++;\n        const delay = Math.min(\n            this.options.reconnectDelay! * Math.pow(1.5, this.reconnectAttempts - 1),\n            30000\n        );\n\n        if (this.options.debug) {\n            console.log(`NATS Echo: Reconnecting in ${delay}ms (attempt ${this.reconnectAttempts}/${this.options.maxReconnectAttempts})`);\n        }\n\n        this.trigger('reconnecting', this.reconnectAttempts);\n\n        this.reconnectTimer = setTimeout(() => {\n            if (this.ws?.readyState === WebSocket.CLOSED) {\n                this.connect().catch(console.error);\n            }\n        }, delay);\n    }\n\n    private async handleBroadcastEvent(event: BroadcastEvent): Promise<void> {\n        const channelName = typeof event.channel === 'string'\n            ? event.channel\n            : event.channel.name;\n\n        // Process event with namespace\n        const formattedEvent = this.eventFormatter.format(this.options.namespace!, event.event);\n\n        // Trigger global event listeners\n        this.trigger('message', event);\n        this.trigger(`event:${formattedEvent}`, event.data);\n\n        // Trigger channel-specific listeners\n        const channel = this.channels.get(channelName);\n        if (channel) {\n            channel.trigger(formattedEvent, event.data);\n\n            // Also trigger with original event name for compatibility\n            channel.trigger(event.event, event.data);\n        }\n    }\n\n    private async resubscribeAll(): Promise<void> {\n        for (const [channelName, channel] of this.channels.entries()) {\n            if (channel.isSubscribed()) {\n                try {\n                    await this.sendSubscribe(channelName, channel);\n                } catch (error) {\n                    console.error(`Failed to resubscribe to ${channelName}:`, error);\n                }\n            }\n        }\n    }\n\n    private async sendSubscribe(channelName: string, channel: Channel): Promise<void> {\n        const subscription = this.subscriptions.get(channelName);\n        if (!subscription) {\n            console.error(`No subscription found for channel ${channelName}`);\n            return;\n        }\n\n        // Send NATS SUBSCRIBE command\n        const subMsg = {\n            op: 'sub',\n            subject: channelName,\n            sid: subscription.sid\n        };\n\n        this.sendToNats(subMsg);\n    }\n\n    public async authenticatePrivateChannel(channelName: string): Promise<AuthResponse> {\n        try {\n            const response = await this.axios.post(this.options.authEndpoint!, {\n                channel_name: channelName,\n                socket_id: this.socketIdentifier\n            });\n\n            return response.data;\n        } catch (error) {\n            console.error('NATS Echo: Authentication failed for', channelName, error);\n            throw error;\n        }\n    }\n\n    // ========== Connector Interface Implementation ==========\n\n    public listen(channelName: string, event: string, callback: Function): Channel {\n        const channel = this.channel(channelName);\n        channel.listen(event, callback);\n        return channel;\n    }\n\n    public channel(channelName: string): Channel {\n        if (!this.channels.has(channelName)) {\n            const channel = new Channel(this, channelName);\n            this.channels.set(channelName, channel);\n\n            // Create subscription entry\n            const sid = 'sid_' + Math.random().toString(36).substr(2, 9);\n            this.subscriptions.set(channelName, {\n                sid,\n                channel,\n                listeners: {}\n            });\n        }\n        return this.channels.get(channelName)!;\n    }\n\n    public privateChannel(channelName: string): PrivateChannel {\n        const fullName = `private-${channelName}`;\n\n        if (!this.channels.has(fullName)) {\n            const channel = new PrivateChannel(this, channelName);\n            this.channels.set(fullName, channel);\n\n            // Create subscription entry\n            const sid = 'priv_' + Math.random().toString(36).substr(2, 9);\n            this.subscriptions.set(fullName, {\n                sid,\n                channel,\n                listeners: {}\n            });\n        }\n        return this.channels.get(fullName) as PrivateChannel;\n    }\n\n    public encryptedPrivateChannel(channelName: string): EncryptedPrivateChannel {\n        const fullName = `private-encrypted-${channelName}`;\n\n        if (!this.channels.has(fullName)) {\n            const channel = new EncryptedPrivateChannel(this, channelName);\n            this.channels.set(fullName, channel);\n\n            // Create subscription entry\n            const sid = 'enc_' + Math.random().toString(36).substr(2, 9);\n            this.subscriptions.set(fullName, {\n                sid,\n                channel,\n                listeners: {}\n            });\n        }\n        return this.channels.get(fullName) as EncryptedPrivateChannel;\n    }\n\n    public join(channelName: string): PresenceChannel {\n        const fullName = `presence-${channelName}`;\n\n        if (!this.channels.has(fullName)) {\n            const channel = new PresenceChannel(this, channelName);\n            this.channels.set(fullName, channel);\n\n            // Create subscription entry\n            const sid = 'pres_' + Math.random().toString(36).substr(2, 9);\n            this.subscriptions.set(fullName, {\n                sid,\n                channel,\n                listeners: {}\n            });\n        }\n        return this.channels.get(fullName) as PresenceChannel;\n    }\n\n    public leave(channelName: string): void {\n        const channel = this.channels.get(channelName);\n        if (channel) {\n            channel.unsubscribe();\n            this.channels.delete(channelName);\n\n            // Send unsubscribe to NATS\n            const subscription = this.subscriptions.get(channelName);\n            if (subscription) {\n                const unsubMsg = {\n                    op: 'unsub',\n                    sid: subscription.sid\n                };\n                this.sendToNats(unsubMsg);\n                this.subscriptions.delete(channelName);\n            }\n        }\n    }\n\n    public notification(userId: string | number): Channel {\n        const channelName = `private-App.Models.User.${userId}`;\n        return this.privateChannel(channelName);\n    }\n\n    public socketId(): string {\n        return this.socketIdentifier;\n    }\n\n    public isConnected(): boolean {\n        return this.connected && this.ws?.readyState === WebSocket.OPEN;\n    }\n\n    public disconnect(): void {\n        // Clear all channels\n        this.channels.forEach(channel => {\n            channel.unsubscribe();\n        });\n        this.channels.clear();\n        this.subscriptions.clear();\n\n        // Cleanup connection\n        this.cleanupConnection();\n\n        // Close WebSocket\n        if (this.ws) {\n            this.ws.close();\n            this.ws = null;\n        }\n\n        // Clear reconnect timer\n        if (this.reconnectTimer) {\n            clearTimeout(this.reconnectTimer);\n            this.reconnectTimer = null;\n        }\n\n        this.connected = false;\n        this.trigger('disconnected');\n    }\n\n    public on(event: string, handler: Function): void {\n        if (!this.eventHandlers.has(event)) {\n            this.eventHandlers.set(event, new Set());\n        }\n        this.eventHandlers.get(event)!.add(handler);\n    }\n\n    public off(event: string, handler?: Function): void {\n        if (!this.eventHandlers.has(event)) {\n            return;\n        }\n\n        if (handler) {\n            this.eventHandlers.get(event)!.delete(handler);\n        } else {\n            this.eventHandlers.delete(event);\n        }\n    }\n\n    private trigger(event: string, ...args: any[]): void {\n        if (this.eventHandlers.has(event)) {\n            this.eventHandlers.get(event)!.forEach(handler => {\n                try {\n                    handler(...args);\n                } catch (error) {\n                    console.error(`Error in event handler for \"${event}\":`, error);\n                }\n            });\n        }\n    }\n\n    // Internal method for channels to subscribe\n    public async subscribeChannel(channel: Channel): Promise<void> {\n        const channelName = channel.getName();\n        const subscription = this.subscriptions.get(channelName);\n\n        if (!subscription) {\n            throw new Error(`No subscription found for channel ${channelName}`);\n        }\n\n        // Only subscribe if we're connected\n        if (this.isConnected()) {\n            await this.sendSubscribe(channelName, channel);\n        }\n    }\n\n    // Internal method for channels to unsubscribe\n    public unsubscribeChannel(channel: Channel): void {\n        const channelName = channel.getName();\n        const subscription = this.subscriptions.get(channelName);\n\n        if (subscription && this.isConnected()) {\n            const unsubMsg = {\n                op: 'unsub',\n                sid: subscription.sid\n            };\n            this.sendToNats(unsubMsg);\n        }\n    }\n\n    // Helper to send messages (for whispers, etc.)\n    public send(subject: string, data: any): void {\n        if (!this.isConnected()) {\n            console.error('Cannot send, not connected to NATS');\n            return;\n        }\n\n        const pubMsg = {\n            op: 'pub',\n            subject,\n            data: typeof data === 'string' ? data : JSON.stringify(data)\n        };\n\n        this.sendToNats(pubMsg);\n    }\n\n    public getConfig(): NatsEchoOptions {\n        return { ...this.options };\n    }\n\n    // Static method to create broadcaster for Laravel Echo\n    static asBroadcaster(): any {\n        return {\n            install(echo: any, options: NatsEchoOptions = {}) {\n                const connector = new NatsConnector(options);\n\n                // Store connector reference\n                echo.connector = connector;\n                echo.nats = connector;\n\n                // Override Echo methods to use NATS connector\n                echo.channel = (name: string) => {\n                    return connector.channel(name);\n                };\n\n                echo.private = (name: string) => {\n                    return connector.privateChannel(name);\n                };\n\n                echo.encryptedPrivate = (name: string) => {\n                    return connector.encryptedPrivateChannel(name);\n                };\n\n                echo.join = (name: string) => {\n                    return connector.join(name);\n                };\n\n                echo.leave = (name: string) => {\n                    connector.leave(name);\n                };\n\n                echo.leaveChannel = echo.leave;\n\n                echo.notification = (userId: string | number) => {\n                    return connector.notification(userId);\n                };\n\n                echo.disconnect = () => {\n                    connector.disconnect();\n                };\n\n                echo.socketId = (): string => {\n                    return connector.socketId();\n                };\n\n                echo.on = (event: string, handler: Function) => {\n                    connector.on(event, handler);\n                    return echo; // Allow chaining\n                };\n\n                echo.off = (event: string, handler?: Function) => {\n                    connector.off(event, handler);\n                    return echo; // Allow chaining\n                };\n\n                echo.listen = (channel: string, event: string, callback: Function) => {\n                    return connector.listen(channel, event, callback);\n                };\n\n                // Connect automatically\n                connector.connect().catch((error: Error) => {\n                    console.error('NATS Echo: Failed to connect', error);\n                    echo.trigger?.('error', error);\n                });\n\n                return echo;\n            }\n        };\n    }\n}","import { NatsConnector } from './connector';\nimport { Channel, PrivateChannel, EncryptedPrivateChannel } from './channel';\nimport { PresenceChannel } from './presence-channel';\nimport { NatsEventFormatter } from './event-formatter';\nimport { NatsEchoOptions, Connector } from './types';\n\n// Create the broadcaster object for Laravel Echo\nconst NatsBroadcaster = NatsConnector.asBroadcaster();\n\n// Export for direct use without Laravel Echo\nexport const createNatsEcho = (options: NatsEchoOptions = {}): Connector => {\n    return new NatsConnector(options);\n};\n\n// Named exports\nexport {\n    NatsConnector,\n    NatsBroadcaster,\n    Channel,\n    PrivateChannel,\n    EncryptedPrivateChannel,\n    PresenceChannel,\n    NatsEventFormatter\n};\n\n// Type exports\nexport type { NatsEchoOptions, Connector };\n\n// Default export (Laravel Echo plugin)\nexport default NatsBroadcaster;"],"names":[],"mappings":"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"}